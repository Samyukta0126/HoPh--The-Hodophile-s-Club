<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>HoPh - The Hodophiles Club</title>
<style>
  body {
    background-color: #008080;
    font-family: 'Lucida Calligraphy', cursive, serif;
    color: #f0f0f0;
    margin: 0;
    padding: 20px;
  }
  header {
    text-align: center;
    padding-bottom: 30px;
  }
  h1 {
    font-size: 3em;
    margin-bottom: 10px;
  }
  .icons {
    font-size: 50px;
    margin: 15px 0 30px;
  }
  .icons span {
    margin: 0 20px;
  }
  #auth-section, #upload-section, #gallery-section {
    max-width: 700px;
    margin: 30px auto;
    background: rgba(255, 255, 255, 0.1);
    padding: 20px 25px;
    border-radius: 10px;
  }
  input[type="text"], textarea {
    width: 100%;
    padding: 8px 12px;
    margin: 8px 0;
    border-radius: 5px;
    border: none;
    font-family: 'Lucida Calligraphy', cursive, serif;
    font-size: 1em;
  }
  button {
    font-family: 'Lucida Calligraphy', cursive, serif;
    font-size: 1em;
    padding: 10px 18px;
    border-radius: 5px;
    border: none;
    background-color: #004d4d;
    color: #f0f0f0;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  button:hover {
    background-color: #006666;
  }
  #gallery div {
    margin-bottom: 30px;
    border-bottom: 1px solid #f0f0f0;
    padding-bottom: 15px;
  }
  #gallery img {
    max-width: 100%;
    border-radius: 8px;
    box-shadow: 0 0 6px #004d4d;
  }
  #gallery p {
    margin: 10px 0 0 0;
    font-size: 0.9em;
    color: #fff;
  }
  #welcome-msg {
    font-size: 1.2em;
    margin-bottom: 15px;
  }
</style>
<!-- Icons -->
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
/>
</head>
<body>

<header>
  <h1>HoPh - The Hodophiles Club</h1>
  <div class="icons">
    <span><i class="fas fa-camera-retro"></i></span>
    <span><i class="fas fa-compass"></i></span>
    <span><i class="fas fa-motorcycle"></i></span>
  </div>
  <p style="max-width:700px; margin:auto;">Welcome to the community for all travel lovers! Share your journeys, stories, and photos here.</p>
</header>

<div id="auth-section">
  <h2>Sign Up / Log In</h2>
  <input type="text" id="usernameInput" placeholder="Enter your name" />
  <br />
  <button onclick="logIn()">Enter</button>
  <p id="auth-msg" style="color:#f88;"></p>
</div>

<div id="welcome-section" style="display:none; max-width:700px; margin:auto; text-align:center;">
  <p id="welcome-msg"></p>
  <button onclick="logOut()">Log Out</button>
</div>

<div id="upload-section" style="display:none; max-width:700px; margin:auto;">
  <h2>Upload Your Travel Picture</h2>
  <input type="text" id="caption" placeholder="Caption" />
  <br />
  <input type="file" id="photoInput" accept="image/*" />
  <br /><br />
  <button onclick="uploadPhoto()">Upload</button>
  <p id="upload-msg" style="color:#f88;"></p>
</div>

<div id="gallery-section" style="max-width:700px; margin:auto;">
  <h2>Travel Gallery</h2>
  <div id="gallery"></div>
</div>

<script>
  // Utility: load data from localStorage or return default
  function loadData(key, defaultValue) {
    const data = localStorage.getItem(key);
    return data ? JSON.parse(data) : defaultValue;
  }
  // Utility: save data to localStorage
  function saveData(key, data) {
    localStorage.setItem(key, JSON.stringify(data));
  }

  // Current logged in user
  let currentUser = null;

  function logIn() {
    const nameInput = document.getElementById('usernameInput');
    const name = nameInput.value.trim();
    const authMsg = document.getElementById('auth-msg');
    if (!name) {
      authMsg.textContent = "Please enter your name.";
      return;
    }
    currentUser = name;
    authMsg.textContent = "";
    showWelcome();
    showUploadSection(true);
    loadGallery();
  }

  function logOut() {
    currentUser = null;
    document.getElementById('welcome-section').style.display = 'none';
    document.getElementById('auth-section').style.display = 'block';
    showUploadSection(false);
  }

  function showWelcome() {
    document.getElementById('auth-section').style.display = 'none';
    document.getElementById('welcome-section').style.display = 'block';
    document.getElementById('welcome-msg').textContent = `Welcome, ${currentUser}!`;
  }

  function showUploadSection(show) {
    document.getElementById('upload-section').style.display = show ? 'block' : 'none';
  }

  function uploadPhoto() {
    const photoInput = document.getElementById('photoInput');
    const captionInput = document.getElementById('caption');
    const uploadMsg = document.getElementById('upload-msg');

    const file = photoInput.files[0];
    const caption = captionInput.value.trim();

    if (!file) {
      uploadMsg.textContent = "Please select an image file.";
      return;
    }
    if (!caption) {
      uploadMsg.textContent = "Please enter a caption.";
      return;
    }

    // Read file as data URL (base64)
    const reader = new FileReader();
    reader.onload = function(e) {
      const imageDataUrl = e.target.result;

      // Load existing gallery or empty array
      const gallery = loadData('gallery', []);

      // Add new photo object
      gallery.unshift({
        user: currentUser,
        caption: caption,
        imageUrl: imageDataUrl,
        timestamp: Date.now()
      });

      saveData('gallery', gallery);

      // Clear inputs and message
      photoInput.value = "";
      captionInput.value = "";
      uploadMsg.textContent = "Uploaded successfully!";

      loadGallery();
    };
    reader.readAsDataURL(file);
  }

  function loadGallery() {
    const gallery = loadData('gallery', []);
    const galleryDiv = document.getElementById('gallery');
    if (gallery.length === 0) {
      galleryDiv.innerHTML = "<p>No photos uploaded yet. Be the first!</p>";
      return;
    }
    galleryDiv.innerHTML = '';
    gallery.forEach(item => {
      const div = document.createElement('div');
      div.innerHTML = `
        <img src="${item.imageUrl}" alt="Travel photo" />
        <p><strong>${item.user}</strong>: ${item.caption}</p>
      `;
      galleryDiv.appendChild(div);
    });
  }

  // On page load, show auth section and load gallery
  window.onload = function() {
    document.getElementById('auth-section').style.display = 'block';
    showUploadSection(false);
    loadGallery();
  }
</script>
</body>
</html>

