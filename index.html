<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>HoPh - The Hodophiles Club</title>
<style>
  body {
    background-color: #008080;
    font-family: 'Lucida Calligraphy', cursive, serif;
    color: #f0f0f0;
    margin: 0;
    padding: 20px;
    text-align: center;
  }
  h1 {
    margin-bottom: 5px;
  }
  #login-section, #upload-section, #gallery-section {
    background: rgba(255,255,255,0.1);
    margin: 20px auto;
    padding: 15px;
    border-radius: 10px;
    max-width: 700px;
  }
  input, button, textarea {
    font-family: 'Lucida Calligraphy', cursive, serif;
    font-size: 1em;
    padding: 8px 12px;
    margin: 8px 0;
    border-radius: 5px;
    border: none;
    width: 90%;
    max-width: 400px;
  }
  button {
    background-color: #004d4d;
    color: #f0f0f0;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  button:hover {
    background-color: #006666;
  }
  #gallery img {
    max-width: 100%;
    border-radius: 8px;
    box-shadow: 0 0 6px #004d4d;
  }
  .photo-item {
    margin-bottom: 25px;
    border-bottom: 1px solid #f0f0f0;
    padding-bottom: 15px;
  }
  .photo-caption {
    margin-top: 8px;
    font-size: 1em;
  }
  .photo-owner {
    font-weight: bold;
    margin-bottom: 5px;
  }
</style>
</head>
<body>

<h1>HoPh - The Hodophiles Club</h1>

<div id="login-section">
  <h2>Enter Your Name to Join</h2>
  <input type="text" id="username" placeholder="Your name" />
  <br />
  <button onclick="login()">Join</button>
</div>

<div id="upload-section" style="display:none;">
  <h2>Upload Your Travel Picture</h2>
  <input type="file" id="photoInput" accept="image/*" />
  <br />
  <textarea id="caption" placeholder="Caption"></textarea>
  <br />
  <button onclick="uploadPhoto()">Upload</button>
  <br />
  <button onclick="logout()">Log Out</button>
</div>

<div id="gallery-section">
  <h2>Travel Gallery</h2>
  <div id="gallery">No photos yet. Be the first to upload!</div>
</div>

<script>
  let currentUser = null;

  function login() {
    const nameInput = document.getElementById('username');
    const name = nameInput.value.trim();
    if (!name) {
      alert('Please enter your name');
      return;
    }
    currentUser = name;
    nameInput.value = '';
    document.getElementById('login-section').style.display = 'none';
    document.getElementById('upload-section').style.display = 'block';
    loadGallery();
  }

  function logout() {
    currentUser = null;
    document.getElementById('login-section').style.display = 'block';
    document.getElementById('upload-section').style.display = 'none';
  }

  function uploadPhoto() {
    if (!currentUser) {
      alert('Please join first');
      return;
    }

    const fileInput = document.getElementById('photoInput');
    const file = fileInput.files[0];
    const caption = document.getElementById('caption').value.trim();

    if (!file) {
      alert('Please select a photo');
      return;
    }

    const reader = new FileReader();
    reader.onload = function(event) {
      const photoData = event.target.result; // base64 image
      savePhoto({ owner: currentUser, caption, photoData });
      fileInput.value = '';
      document.getElementById('caption').value = '';
      loadGallery();
    };
    reader.readAsDataURL(file);
  }

  function savePhoto(photoObj) {
    let photos = JSON.parse(localStorage.getItem('hoph_photos') || '[]');
    photos.unshift(photoObj); // add new photo at start
    localStorage.setItem('hoph_photos', JSON.stringify(photos));
  }

  function loadGallery() {
    const gallery = document.getElementById('gallery');
    const photos = JSON.parse(localStorage.getItem('hoph_photos') || '[]');

    if (photos.length === 0) {
      gallery.innerHTML = 'No photos yet. Be the first to upload!';
      return;
    }

    gallery.innerHTML = '';
    photos.forEach(photo => {
      const div = document.createElement('div');
      div.classList.add('photo-item');
      div.innerHTML = `
        <div class="photo-owner">${photo.owner}</div>
        <img src="${photo.photoData}" alt="Travel photo" />
        <div class="photo-caption">${photo.caption || ''}</div>
      `;
      gallery.appendChild(div);
    });
  }

  // On page load, if photos exist show them but keep upload hidden till login
  loadGallery();
</script>

</body>
</html>
