<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>HoPh - The Hodophiles Club</title>

<!-- Firebase SDKs (compat version) -->
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>

<style>
  body {
    background-color: #008080; /* teal */
    color: #fff;
    font-family: 'Georgia', serif;
    margin: 0;
    padding: 0 20px;
  }
  h1, h2 {
    font-family: 'Brush Script MT', cursive;
  }
  .container {
    max-width: 700px;
    margin: 30px auto;
    background: rgba(255,255,255,0.1);
    border-radius: 12px;
    padding: 20px;
  }
  label, input, textarea, button {
    display: block;
    width: 100%;
    margin-bottom: 15px;
  }
  input, textarea {
    font-family: 'Georgia', serif;
    font-size: 1.1em;
    padding: 8px;
    border-radius: 6px;
    border: none;
  }
  button {
    background-color: #004d4d;
    color: white;
    font-weight: bold;
    padding: 12px;
    border: none;
    cursor: pointer;
    border-radius: 8px;
  }
  button:hover {
    background-color: #006666;
  }
  .dream {
    background: rgba(255,255,255,0.15);
    border-radius: 8px;
    padding: 12px;
    margin-bottom: 12px;
  }
  .dream .name {
    font-weight: bold;
    font-size: 1.2em;
  }
  .wanderlust-section {
    margin-top: 40px;
    background: rgba(255,255,255,0.1);
    border-radius: 12px;
    padding: 20px;
  }
  .wanderlust-section ul {
    list-style-type: none;
    padding-left: 0;
  }
  .wanderlust-section li {
    margin-bottom: 8px;
  }
  .travel-icon {
    margin-right: 6px;
    vertical-align: middle;
  }
</style>
</head>
<body>

<div class="container">
  <h1>Welcome to HoPh - The Hodophiles Club</h1>

  <label for="nameInput">Enter your name:</label>
  <input type="text" id="nameInput" placeholder="Your name..." />

  <label for="dreamInput">Share your travel dream:</label>
  <textarea id="dreamInput" rows="3" placeholder="Describe your dream destination or trip..."></textarea>

  <button id="submitBtn">Share Dream</button>

  <h2>Travel Dreams from Fellow Hodophiles</h2>
  <div id="dreamsList">
    <!-- Posted dreams will appear here -->
  </div>

  <div class="wanderlust-section">
    <h2>Spark Your Wanderlust</h2>

    <h3>Recommended Travel Books</h3>
    <ul>
      <li>✈️ <em>“On the Road”</em> by Jack Kerouac</li>
      <li>🌍 <em>“Into the Wild”</em> by Jon Krakauer</li>
      <li>📚 <em>“Vagabonding”</em> by Rolf Potts</li>
      <li>📖 <em>“The Alchemist”</em> by Paulo Coelho</li>
    </ul>

    <h3>Famous Travel Destinations</h3>
    <ul>
      <li>🏝️ Bali, Indonesia</li>
      <li>🏰 Paris, France</li>
      <li>🗻 Kyoto, Japan</li>
      <li>🏜️ Cappadocia, Turkey</li>
      <li>🏛️ Rome, Italy</li>
    </ul>
  </div>
</div>

<script>
  // Your Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyA_yOkPi4W9mPveWzj6oxPqeBmW9fQ4kM0",
    authDomain: "hoph-community.firebaseapp.com",
    projectId: "hoph-community",
    storageBucket: "hoph-community.appspot.com",
    messagingSenderId: "71106622256",
    appId: "1:71106622256:web:9a5e8607a6e06af4394ef5",
    measurementId: "G-YV8C1HZWCE"
  };

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  const nameInput = document.getElementById('nameInput');
  const dreamInput = document.getElementById('dreamInput');
  const submitBtn = document.getElementById('submitBtn');
  const dreamsList = document.getElementById('dreamsList');

  // Add a new travel dream to Firestore
  submitBtn.onclick = async () => {
    const name = nameInput.value.trim();
    const dream = dreamInput.value.trim();
    if (!name) {
      alert("Please enter your name.");
      return;
    }
    if (!dream) {
      alert("Please write your travel dream.");
      return;
    }

    try {
      await db.collection("travelDreams").add({
        name,
        dream,
        timestamp: firebase.firestore.FieldValue.serverTimestamp()
      });
      dreamInput.value = "";
    } catch (error) {
      alert("Error posting dream: " + error.message);
    }
  };

  // Real-time listener to display dreams
  db.collection("travelDreams")
    .orderBy("timestamp", "desc")
    .onSnapshot((snapshot) => {
      dreamsList.innerHTML = "";
      snapshot.forEach((doc) => {
        const data = doc.data();
        const div = document.createElement("div");
        div.className = "dream";
        div.innerHTML = `<div class="name">🧳 ${escapeHtml(data.name)}</div>
                         <div class="text">${escapeHtml(data.dream)}</div>`;
        dreamsList.appendChild(div);
      });
    });

  // Basic HTML escaping to prevent injection
  function escapeHtml(text) {
    return text.replace(/[&<>"']/g, (m) => {
      return ({
        '&': "&amp;",
        '<': "&lt;",
        '>': "&gt;",
        '"': "&quot;",
        "'": "&#39;"
      })[m];
    });
  }
</script>

</body>
</html>
